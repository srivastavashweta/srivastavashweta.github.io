<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Shweta Srivastava portfolio">

  <title>Shweta Srivastava</title>

  <link rel="stylesheet" href="/css/main.css">

</head>

<body>
  <div class="page">
    <header class="site-header">
      <div class="container header-inner">
        <a class="logo" href="/{{site.baseurl}}" title="Home">Shweta Srivastava</a>
        <nav class="top-nav">
          <a href="/about/">About</a>
          <a href="/textile/">Textile Journey</a>
          <a href="/ui/">UI Journey</a>
          <a href="https://www.linkedin.com/in/shwetasrivastava2106/">LinkedIn</a>
          <a href="mailto:s2106shwetaa@gmail.com">Email</a>
        </nav>
      </div>
    </header>

    <main class="site-main">
      {{content}}
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>© 2026 Shweta Srivastava</span>
        <span>Textile Design · Product Design · HCI</span>
      </div>
    </footer>
  </div>
  <script>
    (function() {
      var carousels = document.querySelectorAll('[data-carousel]');
      carousels.forEach(function(carousel) {
        var track = carousel.querySelector('[data-carousel-track]');
        var prev = carousel.querySelector('[data-carousel-prev]');
        var next = carousel.querySelector('[data-carousel-next]');

        if (!track || !prev || !next) {
          return;
        }

        var updateButtons = function() {
          var maxScroll = track.scrollWidth - track.clientWidth;
          prev.disabled = track.scrollLeft <= 0;
          next.disabled = track.scrollLeft >= maxScroll - 1;
        };

        var scrollByAmount = function(direction) {
          var amount = track.clientWidth * 0.9 * direction;
          track.scrollBy({ left: amount, behavior: 'smooth' });
        };

        prev.addEventListener('click', function() {
          scrollByAmount(-1);
        });

        next.addEventListener('click', function() {
          scrollByAmount(1);
        });

        track.addEventListener('scroll', updateButtons, { passive: true });
        window.addEventListener('resize', updateButtons);
        updateButtons();
      });
    })();
  </script>
  <script>
    (function() {
      var sections = Array.from(document.querySelectorAll('.portfolio-section'));
      var galleryImages = document.querySelectorAll('.portfolio-section .portfolio-grid img');
      if (!sections.length || !galleryImages.length) {
        return;
      }

      var globalToggle = document.querySelector('[data-global-portfolio-toggle]');
      var supportsViewModes = !!document.querySelector('[data-section-toggle], [data-global-portfolio-toggle]');
      var modeStorageKey = 'textile-portfolio-global-expanded';
      var isGlobalExpanded = false;

      var lightbox = document.createElement('div');
      lightbox.className = 'lightbox';
      lightbox.innerHTML = [
        '<div class="lightbox-backdrop" data-lightbox-close></div>',
        '<div class="lightbox-panel" role="dialog" aria-modal="true" aria-label="Image viewer">',
        '<button class="lightbox-close" type="button" aria-label="Close" data-lightbox-close>&times;</button>',
        '<button class="lightbox-nav lightbox-prev" type="button" aria-label="Previous image">&#8249;</button>',
        '<figure class="lightbox-figure">',
        '<img class="lightbox-image" alt="">',
        '<figcaption class="lightbox-caption"></figcaption>',
        '</figure>',
        '<button class="lightbox-nav lightbox-next" type="button" aria-label="Next image">&#8250;</button>',
        '</div>'
      ].join('');
      document.body.appendChild(lightbox);

      var imageEl = lightbox.querySelector('.lightbox-image');
      var captionEl = lightbox.querySelector('.lightbox-caption');
      var prevBtn = lightbox.querySelector('.lightbox-prev');
      var nextBtn = lightbox.querySelector('.lightbox-next');
      var closeTargets = lightbox.querySelectorAll('[data-lightbox-close]');
      var currentList = [];
      var currentIndex = 0;

      var getHighlightLimit = function(section) {
        var rawValue = parseInt(section.getAttribute('data-highlight-limit') || '', 10);
        if (!rawValue || rawValue < 1) {
          return 12;
        }
        return rawValue;
      };

      var getSectionCards = function(section) {
        return Array.from(section.querySelectorAll('.portfolio-card'));
      };

      var getVisibleImages = function(section) {
        return Array.from(section.querySelectorAll('.portfolio-card:not(.is-hidden) img'));
      };

      var syncGridVisibility = function(section) {
        var grids = section.querySelectorAll('.portfolio-grid');
        grids.forEach(function(grid) {
          var hasVisibleCard = !!grid.querySelector('.portfolio-card:not(.is-hidden)');
          grid.classList.toggle('is-empty', !hasVisibleCard);
        });
      };

      var updateSectionToggle = function(section, expanded, hiddenCount) {
        var toggle = section.querySelector('[data-section-toggle]');
        if (!toggle) {
          return;
        }

        var sectionActions = toggle.closest('.section-actions');
        if (hiddenCount <= 0) {
          if (sectionActions) {
            sectionActions.style.display = 'none';
          }
          return;
        }

        if (sectionActions) {
          sectionActions.style.display = '';
        }

        if (isGlobalExpanded) {
          toggle.textContent = 'All sections expanded';
          toggle.disabled = true;
          toggle.setAttribute('aria-expanded', 'true');
          return;
        }

        toggle.disabled = false;
        toggle.setAttribute('aria-expanded', expanded ? 'true' : 'false');
        toggle.textContent = expanded ? 'Show highlights' : 'View full series (' + hiddenCount + ' more)';
      };

      var applySectionVisibility = function(section) {
        var cards = getSectionCards(section);
        var limit = getHighlightLimit(section);
        var canCollapse = cards.length > limit;
        var expanded = canCollapse && (isGlobalExpanded || section.getAttribute('data-expanded') === 'true');

        cards.forEach(function(card, index) {
          var hideCard = canCollapse && !expanded && index >= limit;
          card.classList.toggle('is-hidden', hideCard);
        });

        syncGridVisibility(section);
        updateSectionToggle(section, expanded, Math.max(0, cards.length - limit));
      };

      var applyAllSections = function() {
        sections.forEach(applySectionVisibility);

        if (globalToggle) {
          globalToggle.textContent = isGlobalExpanded ? 'Show highlights only' : 'Show all sections fully';
          globalToggle.setAttribute('aria-pressed', isGlobalExpanded ? 'true' : 'false');
        }

        try {
          localStorage.setItem(modeStorageKey, isGlobalExpanded ? '1' : '0');
        } catch (error) {}
      };

      var buildCaption = function(node) {
        var section = node.closest('.portfolio-section');
        var title = '';
        var process = '';
        var imageCaption = '';

        if (section) {
          var titleEl = section.querySelector('h2');
          title = titleEl ? titleEl.textContent : '';
          process = section.getAttribute('data-process') || '';
        }

        var figure = node.closest('figure');
        if (figure) {
          imageCaption = figure.getAttribute('data-caption') || '';
        }
        if (!imageCaption && node.alt) {
          imageCaption = node.alt;
        }

        var parts = [];
        if (title) parts.push(title);
        if (imageCaption) parts.push(imageCaption);
        if (process) parts.push(process);
        return parts.join(' · ');
      };

      var showImage = function(index) {
        if (!currentList.length) {
          return;
        }
        currentIndex = (index + currentList.length) % currentList.length;
        var node = currentList[currentIndex];
        imageEl.src = node.src;
        imageEl.alt = node.alt || '';
        captionEl.textContent = buildCaption(node);
      };

      var openLightbox = function(list, index) {
        currentList = list;
        if (!currentList.length) {
          return;
        }
        lightbox.classList.add('is-open');
        document.body.classList.add('lightbox-open');
        showImage(index >= 0 ? index : 0);
      };

      var closeLightbox = function() {
        lightbox.classList.remove('is-open');
        document.body.classList.remove('lightbox-open');
        imageEl.src = '';
      };

      var assignCaptions = function() {
        var captionSections = document.querySelectorAll('.portfolio-section[data-captions]');
        captionSections.forEach(function(section) {
          var jsonPath = section.getAttribute('data-captions');
          if (!jsonPath) {
            return;
          }
          fetch(jsonPath)
            .then(function(response) {
              if (!response.ok) {
                throw new Error('Failed to load captions');
              }
              return response.json();
            })
            .then(function(data) {
              if (!Array.isArray(data)) {
                return;
              }
              var map = {};
              data.forEach(function(item) {
                if (item && item.file && item.caption) {
                  map[item.file] = item.caption;
                }
              });
              var images = section.querySelectorAll('img');
              images.forEach(function(img) {
                var parts = img.src.split('/');
                var file = parts[parts.length - 1];
                var caption = map[file];
                if (!caption) {
                  return;
                }
                var figure = img.closest('figure');
                if (figure) {
                  figure.setAttribute('data-caption', caption);
                }
              });
            })
            .catch(function() {});
        });
      };

      if (supportsViewModes) {
        try {
          isGlobalExpanded = localStorage.getItem(modeStorageKey) === '1';
        } catch (error) {}

        sections.forEach(function(section) {
          if (!section.hasAttribute('data-expanded')) {
            section.setAttribute('data-expanded', 'false');
          }

          var sectionToggle = section.querySelector('[data-section-toggle]');
          if (sectionToggle) {
            sectionToggle.addEventListener('click', function() {
              if (isGlobalExpanded) {
                return;
              }

              var isExpanded = section.getAttribute('data-expanded') === 'true';
              section.setAttribute('data-expanded', isExpanded ? 'false' : 'true');
              applySectionVisibility(section);
            });
          }
        });

        if (globalToggle) {
          globalToggle.addEventListener('click', function() {
            isGlobalExpanded = !isGlobalExpanded;
            applyAllSections();
          });
        }

        applyAllSections();
      }
      assignCaptions();

      galleryImages.forEach(function(img) {
        img.addEventListener('click', function(event) {
          event.preventDefault();
          var section = img.closest('.portfolio-section');
          if (!section) {
            return;
          }
          currentList = getVisibleImages(section);
          openLightbox(currentList, currentList.indexOf(img));
        });
      });

      prevBtn.addEventListener('click', function() {
        showImage(currentIndex - 1);
      });

      nextBtn.addEventListener('click', function() {
        showImage(currentIndex + 1);
      });

      closeTargets.forEach(function(target) {
        target.addEventListener('click', closeLightbox);
      });

      document.addEventListener('keydown', function(event) {
        if (!lightbox.classList.contains('is-open')) {
          return;
        }
        if (event.key === 'Escape') {
          closeLightbox();
        } else if (event.key === 'ArrowRight') {
          showImage(currentIndex + 1);
        } else if (event.key === 'ArrowLeft') {
          showImage(currentIndex - 1);
        }
      });
    })();
  </script>
{% include analytics.html %}
</body>

</html>
